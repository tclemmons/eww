(include "experimental/others.yuck")
;; Listener Variables
;;
;;

(deflisten workspace "tail -F workspace.config")

;; Poll variables 
;;
;;

(defpoll time 
  :interval '1s'
  :initial `date +%I:%M%p`
  `date +%I:%M' '%p`
)

(defpoll battery
  :interval '1s'
  :initial `exec scripts/battery`
  `exec scripts/battery`
)


;;(defpoll netstats 
;;  :interval "10s" 
;;  :initial `N/A`
;;  `nmcli -t -f SIGNAL,ACTIVE device wifi | awk -F":" '{if($2=="yes")print$1}'`
;;)

;; Widgets for tray accessories
;;
;;

(defwidget workspaces []
  (literal :content workspace)
)

;; Widgets for the main bar
;;
;;

(defwidget left [] 
  (box
    :orientation "h"
    :space-evenly false
    :halign "start"
    (workspaces)
  )
)

(defwidget middle []
  (box
    :orientation "h"
    :space-evenly false
    :halign "center"
    (label :text time)
  )
)

(defwidget right []
    (box
      :orientation "h"
      :space-evenly false
      :spacing 5
      :halign "end"
      (label :text battery)
  )

)

(defwidget bar []
  (box
    :class "bar"
    :orientation "h"
    (left)
    (middle)
    (right)
  )
)

(defwindow bar
  :monitor 0

  :geometry
  (geometry 
    :x "0%"
    :y "0"
    :width "100%"
    :height "0"
    :anchor "top center"
  )

  :stacking "fg"
  :exclusive false 
  
    (bar) 
)



